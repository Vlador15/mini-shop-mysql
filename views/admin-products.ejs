<!DOCTYPE html>
<html dir="ltr" lang="ru">
   <!--<![endif]-->
   <head> 
      <%- include('includes/head')%> 
   </head>
   <body>
      <!-- Menu !--> 
      <%- include('includes/header')%>
      <div class="wrapper wrapper-shift">    

         <div class="content-container">
            <%- include('includes/menu')%>  
            <div id="checkout-cart" class="container-fluid">
               <ul class="breadcrumb">
                  <li><a href="/">Главная</a></li> 
               </ul>
               <% if (!products.length) { %>
               <div class="row">
                  <div id="content" class="col-sm-12"> 
                     <p>Список товаров пуст!</p>
                     <div class="buttons clearfix">
                        <div class="pull-right"><a href="/" class="btn btn-primary">На главную</a></div>
                     </div>
                  </div>
               </div>
               <% } else { %>
               <div class="row">
                  <div id="content" class="col-sm-12">
                
                        <h3>Список всех товаров для категории: <span style="color: red;"><%- category.name %> (ID: <%- category.categoryId %>)</span></h1> 
                       
                        <div class="table-responsive">
                           <table class="table table-sm table-bordered js-sort-table" style="overflow: scroll;">
                              <thead style="background-color: #474747; color: #fff;">
                                 <tr> 
                                 <th class="text-center"style="width: 5%;">ID</th>
                                 <th class="text-center" style="width: 10%;">Фотография</th>
                                 <th class="text-left" style="width: 20%;">Название</th>
                                 <th class="text-left"style="width: 10%;">В наличие (ед.)</th> 
                                 <th class="text-left" style="width: 10%;">Цена (руб.)</th>
                                 <th class="text-left" style="width: 20%;">Описание</th>
                                 <th class="text-left" style="width: 20%;">Удалить</th>
                                 </tr>
                              </thead>
                              <tbody style="word-break: break-all;">
                                 <% products.forEach(product => { 
                                    let description = product.description.substr(0,100) + "...";   
                                 %>
                                    <tr>  
                                       <td class="text-left"><%- product.productId %></td>
                                       <td class="text-center"> 
                                          <img src="<%- product.photo %>"  alt="<%- product.title %>" title="<%- product.title %>" class="img-responsive" style="height: 100px;">
                                       </td>
                                       <td class="text-left"><%- product.title %></td>
                                       <td class="text-left"><%- product.quantity %></td>
                                       <td class="text-left"><%- product.price %></td>
                                       <td class="text-left"><%- description %></td>
                                       <td class="text-center">
                                          <a href="admin/product/delete/<%- product.productId %>" style="color: red;"> 
                                             Удалить
                                          </a>
                                       </td> 
                                    </tr>
                                 <% })  %>
                                  
                              </tbody>
                           </table>  
                        </div>
                         
                     <script type="text/javascript" src="/scripts/sort-table.js"></script>   
 

                  </div>
               </div>
            </div>
            <% } %>  
         </div>
      </div>
      <%- include('includes/footer')%> 
   </body>
</html>